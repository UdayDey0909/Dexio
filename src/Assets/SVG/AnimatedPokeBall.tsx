import React, { useEffect, useRef } from "react";
import { View, StyleSheet } from "react-native";
import Svg, { Path } from "react-native-svg";
import { Animated, Easing } from "react-native";

interface AnimatedPokeballProps {
   size?: number;
   topColor?: string;
   middleColor?: string;
   bottomColor?: string;
   bandColor?: string;
   strokeColor?: string;
   style?: any;
}

const AnimatedPokeball: React.FC<AnimatedPokeballProps> = ({
   size = 36,
   topColor = "#000000",
   middleColor = "#FFFFFF",
   bottomColor = "#000000",
   bandColor = "#333333",
   strokeColor = "#D1D5DB",
   style,
}) => {
   // Animation values
   const spinAnim = useRef(new Animated.Value(0)).current;
   const scaleAnim = useRef(new Animated.Value(1)).current;

   useEffect(() => {
      const startAnimation = () => {
         spinAnim.setValue(0);
         scaleAnim.setValue(1);

         const spinAnimation = Animated.timing(spinAnim, {
            toValue: 1,
            duration: 2000,
            easing: Easing.linear,
            useNativeDriver: true,
         });
         const scaleUp = Animated.timing(scaleAnim, {
            toValue: 1.1,
            duration: 400,
            easing: Easing.out(Easing.quad),
            useNativeDriver: true,
         });
         const scaleDown = Animated.timing(scaleAnim, {
            toValue: 1,
            duration: 300,
            easing: Easing.in(Easing.quad),
            useNativeDriver: true,
         });
         const sequence = Animated.sequence([
            spinAnimation,
            scaleUp,
            scaleDown,
         ]);
         Animated.loop(sequence, { iterations: -1 }).start();
      };
      startAnimation();
      return () => {
         spinAnim.stopAnimation();
         scaleAnim.stopAnimation();
      };
   }, [spinAnim, scaleAnim]);

   const spin = spinAnim.interpolate({
      inputRange: [0, 1],
      outputRange: ["0deg", "360deg"],
   });
   const scale = scaleAnim;

   return (
      <View style={[styles.container, style]}>
         <Animated.View
            style={[
               styles.animatedContainer,
               {
                  transform: [{ rotate: spin }, { scale }],
               },
            ]}
         >
            <Svg
               width={size}
               height={size}
               viewBox="0 0 747 750"
               style={styles.svg}
            >
               {/* Top half of outer ring */}
               <Path
                  fill={topColor}
                  stroke={strokeColor}
                  strokeWidth={2}
                  d="M347.000000,1.000000 
                  C364.687561,1.000000 382.375122,1.000000 400.798462,1.327376 
                  C406.139252,2.093389 410.779938,2.302665 415.342743,3.012643 
                  C430.477692,5.367667 445.768524,7.103395 460.665009,10.530852 
                  C494.630157,18.345741 526.783813,31.056576 557.312988,48.008686 
                  C583.752869,62.690117 608.128418,80.236298 630.055176,100.896645 
                  C643.663269,113.718849 656.541992,127.540176 668.224915,142.132523 
                  C690.717957,170.227173 708.968201,201.022598 722.261230,234.607971 
                  C732.970947,261.666656 741.372925,289.340912 745.130005,318.308807 
                  C745.557922,321.607788 747.018372,324.772827 748.000000,328.000000 
                  C748.000000,332.024536 748.000000,336.049103 747.531372,340.536804 
                  C702.751038,341.000000 658.439331,341.000244 614.127686,340.999878 
                  C595.303528,340.999725 576.479248,340.961395 557.655334,341.035645 
                  C554.695129,341.047302 552.703735,340.653900 551.976746,337.136200 
                  C545.550171,306.038879 531.431152,278.693604 510.416870,255.067947 
                  C493.321259,235.847931 473.009949,220.661880 449.407684,210.149200 
                  C420.145752,197.115646 389.662628,191.765808 357.611420,194.847763 
                  C341.036285,196.441620 325.051575,200.032761 309.626526,206.035278 
                  C286.739624,214.941589 265.802032,227.181091 248.678314,245.010223 
                  C240.519501,253.505188 233.143204,262.792725 225.833298,272.053406 
                  C211.024277,290.814575 202.658539,312.633789 197.246460,335.609558 
                  C196.179260,340.140076 194.557098,341.077026 190.407516,341.070343 
                  C127.271812,340.968262 64.135880,340.999725 1.000000,341.000000 
                  C1.000000,337.307098 1.000000,333.614166 1.324728,329.250305 
                  C2.095188,327.181366 2.709145,325.812775 2.959323,324.380676 
                  C4.574333,315.135803 5.435464,305.699493 7.814853,296.660583 
                  C12.469162,278.979645 17.273346,261.280853 23.263138,244.022507 
                  C31.682558,219.763657 43.408047,196.951630 57.231491,175.308441 
                  C75.762833,146.294128 97.182495,119.618057 123.446709,97.181740 
                  C135.737137,86.682587 148.330048,76.461792 161.420380,66.991959 
                  C182.762207,51.552822 206.064087,39.484631 230.334305,29.271816 
                  C263.412872,15.352495 297.764893,6.487245 333.491791,2.948143 
                  C338.014465,2.500129 342.498230,1.658999 347.000000,1.000000 z"
               />
               {/* Horizontal band/line in the middle */}
               <Path
                  fill={bandColor}
                  stroke={strokeColor}
                  strokeWidth={2}
                  d="M1.000000,341.000000 
                  C64.135880,340.999725 127.271812,340.968262 190.407516,341.070343 
                  C194.557098,341.077026 196.179260,340.140076 197.246460,335.609558 
                  C202.658539,312.633789 211.024277,290.814575 225.833298,272.053406 
                  C233.143204,262.792725 240.519501,253.505188 248.678314,245.010223 
                  C265.802032,227.181091 286.739624,214.941589 309.626526,206.035278 
                  C325.051575,200.032761 341.036285,196.441620 357.611420,194.847763 
                  C389.662628,191.765808 420.145752,197.115646 449.407684,210.149200 
                  C473.009949,220.661880 493.321259,235.847931 510.416870,255.067947 
                  C531.431152,278.693604 545.550171,306.038879 551.976746,337.136200 
                  C552.703735,340.653900 554.695129,341.047302 557.655334,341.035645 
                  C576.479248,340.961395 595.303528,340.999725 614.127686,340.999878 
                  C658.439331,341.000244 702.751038,341.000000 747.531372,341.000000 
                  C748.000000,362.354218 748.000000,383.708466 748.000000,405.531342 
                  C685.359558,406.000153 622.719055,406.041809 560.078857,405.914764 
                  C555.494446,405.905457 553.708923,406.924377 552.691956,411.907288 
                  C546.550415,442.001984 533.527466,468.985291 513.831848,492.553345 
                  C495.093384,514.976074 472.062775,531.716736 445.109619,543.135986 
                  C429.362885,549.807373 413.105011,554.077881 396.107605,556.117432 
                  C362.124756,560.195129 329.706116,555.067078 298.620026,540.898132 
                  C282.266113,533.444153 267.615936,523.527954 254.079651,511.698273 
                  C229.688873,490.382629 212.838272,464.137299 202.151627,433.802673 
                  C199.585495,426.518524 197.518555,418.959290 196.245300,411.355225 
                  C195.454590,406.632996 193.447678,405.928772 189.358978,405.934937 
                  C126.885208,406.029297 64.411240,406.000244 1.468657,406.000000 
                  C1.000000,384.645782 1.000000,363.291534 1.000000,341.000000 z"
               />
               {/* Inner circle (button) */}
               <Path
                  fill={middleColor || "rgba(255,255,255,0.88)"}
                  d="M277.236542,296.207611 
                  C285.231323,286.089630 294.473999,277.878326 304.944885,271.018829 
                  C322.239502,259.689178 341.054413,253.053574 361.731445,250.825211 
                  C386.923615,248.110199 410.468109,252.927170 432.702362,264.415314 
                  C455.011841,275.942291 472.211670,292.846832 484.528961,314.889282 
                  C496.850250,336.938904 501.772125,360.584686 499.850403,385.461395 
                  C497.903717,410.661316 489.105499,433.400818 473.214355,453.464630 
                  C454.706421,476.832397 431.084106,491.894684 402.198669,498.272430 
                  C377.448456,503.737122 352.933441,502.128632 329.029816,493.054382 
                  C313.061310,486.992432 298.839844,477.992157 286.866302,466.099640 
                  C267.924164,447.285614 255.509674,424.742218 250.884613,398.051270 
                  C246.724045,374.040985 248.843658,350.823608 258.094910,328.348785 
                  C262.828064,316.850189 268.840027,305.997437 277.236542,296.207611 z"
               />
               {/* Bottom half of outer ring */}
               <Path
                  fill={bottomColor}
                  stroke={strokeColor}
                  strokeWidth={2}
                  d="M393.000000,751.000000 
                  C380.979095,751.000000 368.958221,751.000000 356.197571,750.672302 
                  C349.686584,749.901245 343.864838,749.797974 338.153656,748.949951 
                  C321.869354,746.531921 305.496643,744.448425 289.400421,741.078674 
                  C253.928375,733.652893 220.658356,719.979614 189.177200,702.320679 
                  C165.680954,689.140747 143.752716,673.383667 123.842255,655.164490 
                  C106.382843,639.188110 90.007271,622.058289 75.746986,603.105774 
                  C51.747684,571.209717 32.884880,536.510498 19.840420,498.713409 
                  C12.505763,477.460846 7.187930,455.731812 3.856589,433.495148 
                  C3.371938,430.260040 1.974870,427.161652 1.000000,424.000000 
                  C1.000000,418.311951 1.000000,412.623932 1.468657,406.467957 
                  C64.411240,406.000244 126.885208,406.029297 189.358978,405.934937 
                  C193.447678,405.928772 195.454590,406.632996 196.245300,411.355225 
                  C197.518555,418.959290 199.585495,426.518524 202.151627,433.802673 
                  C212.838272,464.137299 229.688873,490.382629 254.079651,511.698273 
                  C267.615936,523.527954 282.266113,533.444153 298.620026,540.898132 
                  C329.706116,555.067078 362.124756,560.195129 396.107605,556.117432 
                  C413.105011,554.077881 429.362885,549.807373 445.109619,543.135986 
                  C472.062775,531.716736 495.093384,514.976074 513.831848,492.553345 
                  C533.527466,468.985291 546.550415,442.001984 552.691956,411.907288 
                  C553.708923,406.924377 555.494446,405.905457 560.078857,405.914764 
                  C622.719055,406.041809 685.359558,406.000153 748.000000,406.000000 
                  C748.000000,411.022095 748.000000,416.044189 747.683105,421.754181 
                  C746.878540,425.190491 746.371216,427.935577 745.906311,430.687836 
                  C741.975769,453.956055 736.741760,476.888611 728.898010,499.197174 
                  C720.071411,524.301514 708.959412,548.275146 695.066833,571.009827 
                  C682.973328,590.800476 669.407043,609.536438 653.680786,626.474854 
                  C641.347595,639.758728 627.815125,651.985168 614.283203,664.086182 
                  C595.864868,680.556946 575.160156,693.931641 553.504578,705.680420 
                  C522.138428,722.697632 489.012421,735.235962 453.995880,742.478821 
                  C435.238403,746.358643 416.391205,749.675903 397.153839,750.042969 
                  C395.763641,750.069458 394.384338,750.667603 393.000000,751.000000 z"
               />
            </Svg>
         </Animated.View>
      </View>
   );
};

const styles = StyleSheet.create({
   container: {
      alignItems: "center",
      justifyContent: "center",
   },
   animatedContainer: {
      alignItems: "center",
      justifyContent: "center",
   },
   svg: {
      // Add any additional styling for the SVG if needed
   },
});

export default AnimatedPokeball;
